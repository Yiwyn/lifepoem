+++
title = '论面向对象设计方法及应用'

date = 2024-11-09T16:51:43+08:00

categories = ["软考"]

tags = ["论文"]

+++



【摘要】

 2022年3月，笔者参与了公司旗下智慧金融平台系统升级项目，并有幸在项目中担任系统架构师，主要负责系统的需求分析和系统设计工作。系统升级的主要目标是为了提升客户签约效率、提升客户签约体验，同时也为了加强公司内部系统信息化建设，将相关部门如财务部门、市场部门等实现线上对接，连通公司内部流程，提高工作效率。

 该项目涉及到面向客户的APP端，面向商户的B端平台，以及内部审批审批管理后台。本文将以此项目为背景，讨论面向对象设计在我们项目中的具体应用。我们将项目中类进行划分；根据面向对象设计原则对系统进行设计，如单一职责、依赖倒置、里氏替换原则等，极大提升了系统的灵活性和可扩展性，对系统的复杂度进行了有效的控制。

 

【正文】

 随着互联网高速发展，各行各业线上发展形式迅猛，由于我司金融平台系统年代已久，导致系统复杂度高，开发难度大，且系统可靠性低，极大影响业务正常运行，为了加强我司在市场中的竞争力，公司决定对平台进行升级，于是在2022年3月该项目正式立项，笔者被任命为系统架构设计师，负责系统的架构设计工作。

该项目选用Java作为主要开发语言，后端采用SpringCloud的微服务架构进行构件，使用MySQL作为数据库，使用Redis作为分布式缓存，RocketMQ作为消息中间件，Flink流批一体作为计算引擎，使用Doris作为实时数仓，为了更高效的完成项目，经项目组谈论决定，我们采用面向对象设计方法来开发新的系统，笔者将以面向设计的原则展开以下讨论。

 在面向对象系统设计中，单一职责原则，强调类的职责需要单一，不应该处理多种事务；开闭原则，软件实体是可扩展的，不应该对原有实体进行修改；里氏替换原则，子类对象必须能够替换其基类对象，且保证程序正确；依赖导致原则，功能开发不应该依赖实现，应该依赖抽象；接口隔离原则，描述一个实体应该有很多专门的接口，而不适用单一的总接口；迪米特原则，一个软件实体应尽可能地减少与其他软件实体地交互。在简单了解以上原则后，笔者将围绕在系统设计中实际应用的原则展开讨论。

 开闭原则。开闭原则强调当系统发生变化时，对扩展时开放的，对修改是封闭的，在我们的支付系统中，需要对接多家支付系统，如微信支付、支付宝、云闪付等，在结合业务流程和三方SDK分析后，笔者在支付模块中添加抽象类，抽象出支付、支付结果回调、退款、退款结果回调等方法，并在抽象类PayChannel的基础上实现WxPay、AliPay、CloudPay等实现类，为了系统更加清晰地路由到指定的实习，我们通过工厂模式创建简单工行PayChannelFactory，通过其那段业务传输的支付方式，路由到指定的支付实现。进行了以上设计后，我们的具体业务流程中使用抽象类进行业务推进，这样我们的整个流程只依赖于我们设计约束好的抽象类，若后期需要修改，只需要针对实现类进行修改即可。同时在折中设计原则下，如果后期需要对接更多的三方支付SDK，我们只需要在PayChannel类的基础上进行派生即可。开闭原则很大程度上提高了代码的灵活性和可扩展性。

 单一职责原则。一个模块或者一个类只负责完成一个职能或者工作，这可以有效地减低系统地复杂性。在我们的电子签约系统中，客户如果签约合同，大概流程可以划分为信息录入、合同内容生成、水印添加、第三方平台签章、合同下载等，在同一个模块中实现以上流程，导致整个模块异常臃肿，且复杂度极高，后续维护困难，使用单一职责原则将以上流程中功能按照模块划分，各个模块各司其职。我们对以上行为模块进行抽象，抽象出BaseContractHandler类，同时抽象出该类需要做出的行为以及优先级，实现如以下实现类，如GeneralHandler内容生成模块，该模块仅需负责对合同内容模块的填充；WaterMarkHandler水印模块，该模块只需考略如何针对不同的文件进行水印添加，同时对外开放API支持个性化水印；EsignHandler模块，三方签章行为模块，该模块主要负责内容选择第三方签章平台进行签约；我们通过责任链模型和迭代器模式，针对不同的合同模板我们动态的对责任链添加具体Handler模块，添加完成后统一执行，达成了更加灵活的电子签章功能。在面对后期需要添加签约行为的时候，我们同理只需要将特定功能集中到BaseContractHandler中的实现中，在责任链中进行配置添加即可完成功能的功能的修改。

 依赖倒置原则。要求程序要依赖于抽象接口而不是具体实现。我们的智慧租赁系统中，由于需求对接大量的三方银行、金融机构，为了提高对接效率，以及问题排查效率，我们将对接的每个环节进行抽象，如申请资金、合同签订、金融机构发放款项等，我们在业务流程中对以上环境进行抽象，抽象出对应的抽象类，使用抽象类可以在基类中做出默认实现，这也是与接口的最大差距，我们的流程开发只需要对抽象接口进行调用可，对于具体实现开发我们则依次对抽象类进行实现。通过面对接口编程，整个业务流程相对稳定，同时对于具体实现细节有了更高的灵活性。

 

通过上述面向对象设计原则的运用，我们的系统的复杂性得到了有效的控制，系统的灵活性和可扩展性得到极大改善，经过10个月的研发，该项目于2023年1月上线，至今稳定运行，系统月均流水额达5亿人民币，各项功能和性能指标均达到了公司各部门的要求，并且在后续的扩展需求、优化需求中相应迅速，极大缩短了开发周期，得到了公司领导的认可。虽然项目取得了成功，但是在这个项目中我们也发现了很多问题，例如，使用设计原则和大量的设计模型提高了系统的灵活性，但是牺牲了一定的代码可读性，导致部分团队成员不能准确的理解业务功能，为了解决这个问题，我们加强文档编写，在开发前中后进行详细的文档说明，一定程度是解决了团队成员业务、代码理解不统一的问题。

 

通过本次项目，笔者在系统分析、架构设计上得到了很大的进步，积累了不少宝贵的经验，为我后续的工作开展提供了很大的帮助。同时也激励着笔者需要不断的学习新的知识，为将来更加复杂的工作做准备。

 
